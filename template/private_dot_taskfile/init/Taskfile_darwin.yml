version: '3'

tasks:
  ssh-config:
    preconditions:
      - command -v tailscale
    cmds:
      - task: ssh-config-macbooks
      - task: ssh-config-nas
    silent: true

  ssh-config-macbooks:
    internal: true
    silent: true
    preconditions:
      - test -f ~/.taskfile/scripts/tailscale_devices_to_ssh_config.sh
    cmd: bash ~/.taskfile/scripts/tailscale_devices_to_ssh_config.sh "air pro"

  ssh-config-nas:
    internal: true
    silent: true
    preconditions:
      - test -f ~/.taskfile/scripts/tailscale_devices_to_ssh_config.sh "nas"
    cmd: bash ~/.taskfile/scripts/tailscale_devices_to_ssh_config.sh "nas"
